!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),u=i(o),a=io(),c=u["default"].$(".input"),l=u["default"].$(".send"),r=u["default"].$(".message ul"),d=u["default"].$(".inputname"),s=u["default"].$(".confirm"),f=u["default"].$("#shade"),p=u["default"].$(".userlist"),m=u["default"].$(".users .nums");d.focus();var v=function(e,t){var n=u["default"].$c("li",{className:"chatitem "+(t?"myself":"others")}),i=u["default"].$c("span",{className:"time",textContent:"("+u["default"].timeformat(e.time)+")"}),o=u["default"].$c("p",{className:"username"}),a=document.createTextNode(e.username+(t?"-我":""));t?(o.appendChild(i),o.appendChild(a)):(o.appendChild(a),o.appendChild(i));var c=u["default"].$c("p",{className:"msg",textContent:e.msg});n.appendChild(o),n.appendChild(c),r.appendChild(n),n.scrollIntoView()},h=function(e,t){p.innerHTML="";var e=a.id;t.forEach(function(t){var n=u["default"].$c("li",{id:"id"+t.id,textContent:t.username+(t.id===e?"(我)":"")});p.appendChild(n)})},g=function(e,t,n){var i=a.id===t;if(i)f.style.display="none",c.focus();else if(!a.isLogin)return;var o=u["default"].$c("li",{className:"chatitem msgitem userjoin",innerHTML:'<p class="msgcontent">'+e+(i?"(我)":"")+" 加入群聊</p>"});r.appendChild(o),h(t,n),m.textContent=n.length,o.scrollIntoView()},$=function(e,t,n){console.log(t);var i=u["default"].$("#id"+e);i.parentNode.removeChild(i),m.textContent=n;var o=u["default"].$c("li",{className:"chatitem msgitem userout",innerHTML:'<p class="msgcontent">'+t+"退出群聊</p>"});r.appendChild(o),o.scrollIntoView()},C=function x(e){x.wait=1e3,clearTimeout(x[e]);var t=u["default"].$("#id"+e);t.querySelector(".inputing")||t.appendChild(u["default"].$c("span",{className:"inputing",textContent:"（正在输入……）"})),x[e]=setTimeout(function(){var e=t.querySelector(".inputing");clearTimeout(x.st),e.parentNode.removeChild(e)},x.wait)},y=function(e){d.classList.add("conflict"),d.setAttribute("placeholder","昵称"+e+"已被占用"),d.value="",f.style.display="",d.focus()};c.onkeydown=function(e){return 13==e.keyCode?(l.click(),!1):void 0},d.onkeydown=function(e){13==e.keyCode&&s.click()},document.body.ontouchmove=function(){return!1},a.on("connect",function(){s.onclick=function(){var e=d.value.replace(/\s/g,"");e?a.emit("join",e,a.id):d.focus()},a.on("conflict"+a.id,y),a.on("userjoin",function(e,t,n){g(e,t,n),a.id===t&&(a.isLogin=!0,a.on("userout",$),a.on("inputing",C),l.onclick=function(){var e=c.value.trim();e&&(a.emit("chat",e),c.value="",c.focus())},c.oninput=function(){a.emit("inputing")},a.on("chat",function(e){v(e,e.id===a.id)}))})})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={$:function(e){return document.querySelector(e)},$$:function(e){return document.querySelectorAll(e)},$c:function(e,t){var n=document.createElement(e);return Object.assign(n,t),n},timeformat:function(e){var t=new Date(e),n=t.getMonth()+1,i=t.getDate(),o=t.getHours(),u=t.getMinutes(),a=t.getSeconds();return n=n>9?n:"0"+n,i=i>9?i:"0"+i,o=o>9?o:"0"+o,u=u>9?u:"0"+u,a=a>9?a:"0"+a,n+"-"+i+" "+o+":"+u+":"+a}}}]);